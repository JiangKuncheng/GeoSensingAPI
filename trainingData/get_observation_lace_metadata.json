[{
  "类别名称": "卫星观测",
  "工具名称": "get_observation_lace",
  "工具版本": "1.0.0",
  "任务链": {
    "阶段": "发现阶段",
    "任务类型": ["发现任务", "评估任务"]
  },
  "工具描述": "基于卫星TLE数据计算指定时间段内的地面覆盖轨迹，生成GeoJSON格式的卫星足迹数据。本工具用于发现阶段的时空覆盖分析和评估阶段的观测能力评估。",
  "请求方式": "POST",
  "幂等性": true,
  "副作用": "无",
  "接口": "127.0.0.1:8000/get_observation_lace",
  "输入格式": {
    "类型": "object",
    "属性": {
      "TLE数据字典": {
        "类型": "object",
        "描述": "包含卫星名称和对应TLE数据的字典。键为卫星名称（字符串），值为两行TLE字符串。例如：{'LANDSAT 8': '1 39084U...\\n2 39084...', 'SENTINEL-2A': '1 40697U...\\n2 40697...'}"
      },
      "开始时间": {
        "类型": "string",
        "描述": "观测开始时间，格式为 'YYYY-MM-DD HH:MM:SS.fff'。例如：'2025-08-01 00:00:00.000'"
      },
      "结束时间": {
        "类型": "string",
        "描述": "观测结束时间，格式为 'YYYY-MM-DD HH:MM:SS.fff'。例如：'2025-08-01 23:59:59.000'"
      },
      "视场角": {
        "类型": "number",
        "描述": "卫星的视场角（FOV），单位为度。默认值为10.0度"
      },
      "时间间隔": {
        "类型": "integer",
        "描述": "计算轨迹点的时间间隔，单位为秒。默认值为300秒（5分钟）"
      }
    },
    "必填": ["TLE数据字典", "开始时间", "结束时间"],
    "允许附加属性": false
  },
  "输出格式": {
    "类型": "object",
    "属性": {
      "类型": {
        "类型": "string",
        "值": "FeatureCollection",
        "描述": "GeoJSON类型标识"
      },
      "特征集合": {
        "类型": "array",
        "项目": {
          "类型": "object",
          "属性": {
            "类型": {
              "类型": "string",
              "值": "Feature"
            },
            "几何体": {
              "类型": "object",
              "描述": "卫星足迹的多边形几何体"
            },
            "属性": {
              "类型": "object",
              "属性": {
                "卫星名称": {
                  "类型": "string",
                  "描述": "卫星名称"
                },
                "时间戳": {
                  "类型": "string",
                  "描述": "该足迹对应的时间点，ISO格式"
                }
              }
            }
          }
        }
      }
    }
  },
  "示例请求": {
    "TLE数据字典": {
      "LANDSAT 8": "1 39084U 13008A   25225.93518726  .00000330  00000-0  83304-4 0  9991\n2 39084  98.2219 295.6904 0001221  90.8808 269.2530 14.57106224653150"
    },
    "开始时间": "2025-08-01 00:00:00.000",
    "结束时间": "2025-08-01 12:00:00.000",
    "视场角": 10.0,
    "时间间隔": 600
  },
  "示例响应": {
    "类型": "FeatureCollection",
    "特征集合": [
      {
        "类型": "Feature",
        "几何体": {
          "类型": "Polygon",
          "坐标": [[[116.3, 39.9], [116.4, 39.9], [116.4, 40.0], [116.3, 40.0], [116.3, 39.9]]]
        },
        "属性": {
          "卫星名称": "LANDSAT 8",
          "时间戳": "2025-08-01T00:00:00+00:00"
        }
      }
    ]
  },
  "错误格式": {
    "类型": "object",
    "属性": {
      "错误": { "类型": "string" },
      "详情": { "类型": "string" }
    }
  },
  "行为规范": {
    "需要思考字段": true,
    "思考说明": [
      "当前任务是什么",
      "处于哪个阶段（发现阶段或评估阶段）",
      "为什么需要计算覆盖轨迹",
      "如何使用TLE数据进行轨迹计算",
      "输出的GeoJSON将如何被后续工具使用"
    ]
  },
  "示例": [
    {
      "思考": "用户需要计算多颗卫星在指定时间段内的地面覆盖轨迹，以评估观测能力。根据前文分析，当前执行的任务是一个工具链条为[任务阶段->发现阶段->评估阶段]的任务。当前任务链条处于发现阶段。为了继续，我需要调用 `get_observation_lace` 函数来基于TLE数据计算卫星的覆盖轨迹。这个函数需要TLE数据字典、时间范围和观测参数作为输入，才能生成GeoJSON格式的覆盖结果。获得get_observation_lace工具的输出后，可以用于后续的覆盖分析和观测规划。",
      "工具": "get_observation_lace",
      "输入": {
        "TLE数据字典": {
          "LANDSAT 8": "1 39084U 13008A   25225.93518726  .00000330  00000-0  83304-4 0  9991\n2 39084  98.2219 295.6904 0001221  90.8808 269.2530 14.57106224653150"
        },
        "开始时间": "2025-08-01 00:00:00.000",
        "结束时间": "2025-08-01 12:00:00.000",
        "视场角": 10.0,
        "时间间隔": 600
      }
    },
    {
      "思考": "用户需要分析特定区域内的卫星覆盖情况，需要先获取卫星的覆盖轨迹。根据前文分析，当前执行的任务是一个工具链条为[任务阶段->发现阶段]的任务。当前任务链条处于发现阶段。为了继续，我需要调用 `get_observation_lace` 函数来计算卫星在给定时间窗口内的地面足迹。这个函数接受TLE数据和时间参数，输出GeoJSON格式的覆盖轨迹，可用于后续的空间分析。",
      "工具": "get_observation_lace",
      "输入": {
        "TLE数据字典": {
          "SENTINEL-2A": "1 40697U 15028A   25225.66220237  .00000108  00000-0  57680-4 0  9995\n2 40697  98.5664 299.9242 0001176  96.3963 263.7354 14.30826489529757",
          "SENTINEL-2B": "1 42063U 17013A   25225.93481032  .00000105  00000-0  56678-4 0  9995\n2 42063  98.5667 300.1355 0001261  95.8035 264.3292 14.30816795440702"
        },
        "开始时间": "2025-08-05 06:00:00.000",
        "结束时间": "2025-08-05 18:00:00.000",
        "视场角": 15.0,
        "时间间隔": 300
      }
    }
  ]
},{
  "category_name": "Satellite Observation",
  "tool_name": "get_observation_lace",
  "tool_version": "1.0.0",
  "task_chain": {
    "phase": "Discovery Phase",
    "task_type": ["Discovery Task", "Evaluation Task"]
  },
  "tool_description": "Calculate ground coverage trajectories for satellites within a specified time period based on TLE data, generating GeoJSON format satellite footprint data. This tool is used for spatiotemporal coverage analysis in the discovery phase and observation capability assessment in the evaluation phase.",
  "request_method": "POST",
  "idempotent": true,
  "side_effects": "None",
  "endpoint": "127.0.0.1:8000/get_observation_lace",
  "input_format": {
    "type": "object",
    "properties": {
      "tle_dict": {
        "type": "object",
        "description": "Dictionary containing satellite names and corresponding TLE data. Keys are satellite names (strings), values are two-line TLE strings. Example: {'LANDSAT 8': '1 39084U...\\n2 39084...', 'SENTINEL-2A': '1 40697U...\\n2 40697...'}"
      },
      "start_time_str": {
        "type": "string",
        "description": "Observation start time in format 'YYYY-MM-DD HH:MM:SS.fff'. Example: '2025-08-01 00:00:00.000'"
      },
      "end_time_str": {
        "type": "string",
        "description": "Observation end time in format 'YYYY-MM-DD HH:MM:SS.fff'. Example: '2025-08-01 23:59:59.000'"
      },
      "fov": {
        "type": "number",
        "description": "Satellite field of view (FOV) in degrees. Default value is 10.0 degrees"
      },
      "interval_seconds": {
        "type": "integer",
        "description": "Time interval for trajectory point calculation in seconds. Default value is 300 seconds (5 minutes)"
      }
    },
    "required": ["tle_dict", "start_time_str", "end_time_str"],
    "additionalProperties": false
  },
  "output_format": {
    "type": "object",
    "properties": {
      "type": {
        "type": "string",
        "value": "FeatureCollection",
        "description": "GeoJSON type identifier"
      },
      "features": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "value": "Feature"
            },
            "geometry": {
              "type": "object",
              "description": "Polygon geometry of satellite footprint"
            },
            "properties": {
              "type": "object",
              "properties": {
                "satellite": {
                  "type": "string",
                  "description": "Satellite name"
                },
                "timestamp": {
                  "type": "string",
                  "description": "Timestamp corresponding to this footprint in ISO format"
                }
              }
            }
          }
        }
      }
    }
  },
  "example_request": {
    "tle_dict": {
      "LANDSAT 8": "1 39084U 13008A   25225.93518726  .00000330  00000-0  83304-4 0  9991\n2 39084  98.2219 295.6904 0001221  90.8808 269.2530 14.57106224653150"
    },
    "start_time_str": "2025-08-01 00:00:00.000",
    "end_time_str": "2025-08-01 12:00:00.000",
    "fov": 10.0,
    "interval_seconds": 600
  },
  "example_response": {
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature",
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[116.3, 39.9], [116.4, 39.9], [116.4, 40.0], [116.3, 40.0], [116.3, 39.9]]]
        },
        "properties": {
          "satellite": "LANDSAT 8",
          "timestamp": "2025-08-01T00:00:00+00:00"
        }
      }
    ]
  },
  "error_format": {
    "type": "object",
    "properties": {
      "error": { "type": "string" },
      "details": { "type": "string" }
    }
  },
  "behavior_guidelines": {
    "requires_thought_block": true,
    "thought_explanation": [
      "What the current task is",
      "Which phase of the task chain you're in (Discovery Phase or Evaluation Phase)",
      "Why coverage trajectory calculation is necessary",
      "How to use TLE data for trajectory calculation",
      "How the output GeoJSON will be used by subsequent tools"
    ]
  },
  "examples": [
    {
      "thought": "The user needs to calculate ground coverage trajectories for multiple satellites within a specified time period to assess observation capabilities. Based on previous analysis, the current task follows a process chain of [Task/Requirement Phase -> Discovery Phase -> Evaluation Phase]. The task is currently in the Discovery Phase. To proceed, I need to call the `get_observation_lace` function to calculate satellite coverage trajectories based on TLE data. This function requires a TLE data dictionary, time range, and observation parameters as input to generate GeoJSON format coverage results. After obtaining the output from the get_observation_lace tool, it can be used for subsequent coverage analysis and observation planning.",
      "tool": "get_observation_lace",
      "input": {
        "tle_dict": {
          "LANDSAT 8": "1 39084U 13008A   25225.93518726  .00000330  00000-0  83304-4 0  9991\n2 39084  98.2219 295.6904 0001221  90.8808 269.2530 14.57106224653150"
        },
        "start_time_str": "2025-08-01 00:00:00.000",
        "end_time_str": "2025-08-01 12:00:00.000",
        "fov": 10.0,
        "interval_seconds": 600
      }
    },
    {
      "thought": "The user needs to analyze satellite coverage for a specific region and requires satellite coverage trajectories first. Based on previous analysis, the current task follows a process chain of [Task/Requirement Phase -> Discovery Phase]. The task is currently in the Discovery Phase. To proceed, I need to call the `get_observation_lace` function to calculate satellite ground footprints within the given time window. This function accepts TLE data and time parameters, outputting GeoJSON format coverage trajectories that can be used for subsequent spatial analysis.",
      "tool": "get_observation_lace",
      "input": {
        "tle_dict": {
          "SENTINEL-2A": "1 40697U 15028A   25225.66220237  .00000108  00000-0  57680-4 0  9995\n2 40697  98.5664 299.9242 0001176  96.3963 263.7354 14.30826489529757",
          "SENTINEL-2B": "1 42063U 17013A   25225.93481032  .00000105  00000-0  56678-4 0  9995\n2 42063  98.5667 300.1355 0001261  95.8035 264.3292 14.30816795440702"
        },
        "start_time_str": "2025-08-05 06:00:00.000",
        "end_time_str": "2025-08-05 18:00:00.000",
        "fov": 15.0,
        "interval_seconds": 300
      }
    }
  ]
}
]
